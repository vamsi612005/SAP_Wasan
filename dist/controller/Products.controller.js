sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(t,e,o){"use strict";return t.extend("ui5.walkthrough.controller.Products",{onInit:function(){const t=new e;t.loadData("model/products.json");this.getView().setModel(t);if(!sap.ui.getCore().getModel("cartModel")){sap.ui.getCore().setModel(new e({items:[],total:0}),"cartModel")}},onAddToCartButtonPress:function(t){const e=t.getSource();const n=e.getBindingContext();const s=n.getObject();const i=s.name;const a=parseInt(s.quantity);const r=parseFloat(s.price);const c=sap.ui.getCore().getModel("cartModel");const d=c.getProperty("/items")||[];const u=d.find(t=>t.name===i);const l=u?u.quantity:0;if(l+1>a){o.show(`Only ${a} "${i}" available in stock.`);return}if(u){u.quantity+=1}else{d.push({name:i,price:r,description:s.description,image:s.image,quantity:1})}const p=d.reduce((t,e)=>t+e.price*e.quantity,0);c.setProperty("/items",d);c.setProperty("/total",p);o.show(`${i} added to cart`)}})});
//# sourceMappingURL=Products.controller.js.map